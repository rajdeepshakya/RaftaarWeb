<div class="main ">
    <div class="d-flex mb-4">
        <img (click)="goBack()" src="assets/images/arrow-circle-left.svg">
        <h3 (click)="goBack()" class="mb-0 ms-2 marketplace-Product">Add New Product</h3>
    </div>
    <form [formGroup]="addForm">
        <div class="row m-0 add-new px-md-5 px-0">
            <div class="col-lg-6 ">
                <div class="adddocumentpage main_comp pb-0">
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Business Activity</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" class=" " formControlName="industry_id"
                             (selectionChange)="getIndustry($event)"
                           >
                            <mat-option *ngFor="let items of business" [value]="items.id">{{items.industry_name}}
                            </mat-option>
                            </mat-select>
                            </mat-form-field>
                            <small *ngIf="submitted && addForm.controls['industry_id'].invalid " class="alert px-0 select-box-alert">
                                <small *ngIf="submitted && addForm.controls['industry_id'].errors.required">
                                    Business activity is required
                                </small>
                            </small>
                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Product sub-category</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" formControlName="category2_id"
                            
                            (selectionChange)="productTypes($event)">
                            <mat-option *ngFor="let items of subCatagory" [value]="items.id">{{items.title}}
                           </mat-option>
                           </mat-select>
                           </mat-form-field>
                        <small *ngIf="submitted && addForm.controls['industry_id'].invalid " class="alert px-0 select-box-alert">
                                <small *ngIf="submitted && addForm.controls['industry_id'].errors.required">
                                    Product sub category is required
                                </small>
                            </small>
                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Product sub-type</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" (selectionChange)="selectProductSubType($event)"
                           
                            formControlName="category4_id">
                            <mat-option *ngFor="let items of substype" [value]="items.id">{{items.title}}
                           </mat-option>
                           </mat-select>
                           </mat-form-field>

                           <small *ngIf="submitted && addForm.controls['category4_id'].invalid " class="alert px-0 select-box-alert">
                            <small *ngIf="submitted && addForm.controls['category4_id'].errors.required">
                                Product sub type is required
                            </small>
                        </small>
                    </div>
                    <div *ngIf="showProductSubType" class="locateyourdata ">
                        <span >Enter Product sub-type</span>
                        <input type="text" class=" locationdata "
                            [ngClass]="{ 'is-invalid': submitted && f['product_sub_type'].errors}"
                            formControlName="product_sub_type" placeholder="Enter product sub-type">
                        <div *ngIf=" submitted && f['product_sub_type'].errors" class="invalid-feedback">
                            <div *ngIf="submitted && f['product_sub_type'].errors['required']">Product sub-type is
                                required</div>
                        </div>
                    </div>
                    <div class="locateyourdata  position-relative">
                        <span>Product Price</span>
                        <input type="text" class=" locationdata ps-5"
                            oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');"
                            [ngClass]="{ 'is-invalid': submitted && f['price'].errors}" formControlName="price"
                            maxlength="20" placeholder="Enter product price">
                        <p class="position-absolute price">â‚¹</p>
                        <div *ngIf=" submitted && f['price'].errors" class="invalid-feedback ">
                            <div *ngIf="submitted && f['price'].errors['required']">Price is required</div>
                        </div>
                    </div>
                    <div class="locateyourdata ">
                        <span>Place of manufacturing</span>
                        <div class="">
                            <input type="text" class=" locationdata " maxlength="50"
                                [ngClass]="{ 'is-invalid': submitted && f['manufacturing_place'].errors}"
                                formControlName="manufacturing_place" placeholder="Enter place of manufacturing">
                            <div *ngIf=" submitted && f['manufacturing_place'].errors" class="invalid-feedback ">
                                <div *ngIf="submitted && f['manufacturing_place'].errors['required']">Place of
                                    Manufacturing is required</div>
                            </div>
                        </div>
                    </div>
                    <div class="locateyourdata datepicker">
                        <span>Purchase Year</span>
                        <img class="calender" src="assets/images/calendar-2.png" alt="">
                        <mat-form-field appearance="fill" style="width:100%" class="mt-2">
                            <input matInput [matDatepicker]="endDate " placeholder="Enter purchase year"
                               
                                formControlName="purchase_year" (click)="endDate.open()" readonly>
                            <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                            <mat-datepicker #endDate></mat-datepicker>
                          
                        </mat-form-field>
                        <small *ngIf="submitted && addForm.controls['purchase_year'].invalid " class="alert px-0 select-box-alert">
                            <small *ngIf="submitted && addForm.controls['purchase_year'].errors.required">
                                Purchase Year is required
                            </small>
                        </small>
                    </div>

                    <div class="locateyourdata">
                        <span>Product Location</span>
                        <!-- <div class="location">
                            <img class="" src="assets/images/gps.svg" alt="">
                        </div> -->
                        <input type="text" class=" locationdata  location " maxlength="30"
                            [ngClass]="{ 'is-invalid': submitted && f['location'].errors}" formControlName="location"
                            placeholder="Add product location here ">
                        <div *ngIf=" submitted && f['location'].errors" class="invalid-feedback">
                            <div *ngIf="submitted && f['location'].errors['required']">Location is required</div>
                        </div>
                    </div>
                    <div class="locateyourdata ">
                        <span>Country Origin</span>
                        <input type="text" class=" locationdata "
                            [ngClass]="{ 'is-invalid': submitted && f['country_origin'].errors}"
                            formControlName="country_origin" placeholder="Enter country of origin">
                        <div *ngIf=" submitted && f['country_origin'].errors" class="invalid-feedback">
                            <div *ngIf="submitted && f['country_origin'].errors['required']">Country origin is Required
                            </div>
                        </div>
                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Product Condition</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" 
                            formControlName="product_condition">
                            <mat-option *ngFor="let items of productCondition" [value]="items">{{items | titlecase}}
                            </mat-option>
                            </mat-select>
                            </mat-form-field>
                            <small *ngIf="submitted && addForm.controls['product_condition'].invalid " class="alert px-0 select-box-alert">
                                <small *ngIf="submitted && addForm.controls['product_condition'].errors.required">
                                    Product condition is required
                                </small>
                            </small>
                    </div>
                    <div class="locateyourdata " formArrayName="custom_fields">
                        <div [formGroupName]="i" *ngFor="let customfield of customfields; let i=index;">
                            <span class="mt-2">{{customfield}}</span>
                            <input type="text" class="locationdata mb-2 " formControlName="content" maxlength="30"
                                placeholder="Please enter {{customfield}}">
                        </div>

                    </div>
                </div>

            </div>
            <div class="col-lg-6 ">
                <div class="adddocumentpage main_comp pb-0">
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Industry</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" 
                            formControlName="category1_id" (selectionChange)="getSubCatagory($event); brand($event)">
                            <mat-option *ngFor="let items of industry" [value]="items.id">{{items.title}}
                           </mat-option>
                           </mat-select>
                           </mat-form-field>
                           <small *ngIf="submitted && addForm.controls['category1_id'].invalid " class="alert px-0 select-box-alert">
                            <small *ngIf="submitted && addForm.controls['category1_id'].errors.required">
                                Industry is required
                            </small>
                        </small>

                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Product Type</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" 
                            formControlName="category3_id" (selectionChange)="productsubType($event)">
                            <mat-option *ngFor="let items of producttype" [value]="items.id">{{items.title}}
                           </mat-option>
                           </mat-select>
                           </mat-form-field>
                           <small *ngIf="submitted && addForm.controls['category3_id'].invalid " class="alert px-0 select-box-alert">
                            <small *ngIf="submitted && addForm.controls['category3_id'].errors.required">
                                Product type is required
                            </small>
                        </small>
                    </div>
                    <div *ngIf="showProductType" class="locateyourdata ">
                        <span>Enter Product Type</span>
                        <input type="text" class=" locationdata "
                            [ngClass]="{ 'is-invalid': submitted && f['product_type'].errors}"
                            formControlName="product_type" placeholder="Enter product type">
                        <div *ngIf=" submitted && f['product_type'].errors" class="invalid-feedback">
                            <div *ngIf="submitted && f['product_type'].errors['required']">Product type is required
                            </div>
                        </div>
                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Product Brand</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select"  formControlName="brand_id">
                            <mat-option *ngFor="let items of productBrand" [value]="items.id">{{items.brand_name}}
                            </mat-option>
                            </mat-select>
                            </mat-form-field>
                            <small *ngIf="submitted && addForm.controls['brand_id'].invalid " class="alert px-0 select-box-alert">
                                <small *ngIf="submitted && addForm.controls['brand_id'].errors.required">
                                    Product brand is required
                                </small>
                            </small>
                    </div>

                    <div class="locateyourdata ">
                        <span>Product Description</span>
                        <div class="locateyourdata mt-2">
                            <textarea type="text" class=" addcontent"
                                [ngClass]="{ 'is-invalid': submitted && f['description'].errors}"
                                formControlName="description" maxlength="1500"
                                placeholder="Enter product description"></textarea>
                            <div *ngIf=" submitted && f['description'].errors" class="invalid-feedback mt-0 ">
                                <div *ngIf="submitted && f['description'].errors['required']">Description is required
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Ownership Type</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" 
                            formControlName="ownership_type">
                            <mat-option *ngFor="let items of ownerShip" [value]="items">{{items | titlecase}}
                                </mat-option>
                      </mat-select>
                      </mat-form-field>
                      <small *ngIf="submitted && addForm.controls['ownership_type'].invalid " class="alert px-0 select-box-alert">
                        <small *ngIf="submitted && addForm.controls['ownership_type'].errors.required">
                            Ownership type is required
                        </small>
                    </small>
                    </div>
                    <div class="d-flex flex-column locateyourdata phonedetails">
                        <span class="mb-2">Is this product under hypothecation?</span>
                        <mat-form-field appearance="fill" class="">
                        <mat-select placeholder="Select" 
                            formControlName="under_hypothecation">
                            <mat-option *ngFor="let items of hypothecation" [value]="items">{{items | titlecase}}
                                </mat-option>
                                </mat-select>
                                </mat-form-field>
                                <small *ngIf="submitted && addForm.controls['under_hypothecation'].invalid " class="alert px-0 select-box-alert">
                                    <small *ngIf="submitted && addForm.controls['under_hypothecation'].errors.required">
                                        Under hypothecation is required
                                    </small>
                                </small>

                    </div>
                   

                </div>
                <div class="adddocumentpage main_comp pt-0">
                    <div>
                        <div class="d-flex justify-content-between align-items-start mt-3">
                            <span>Upload Files</span>
                            <p class="mb-0 Maxallowed">Maximum 5 allowed</p>
                        </div>
                        <hr>
                        <div class="adddocumentpage main_comp pt-0 mt-3">
                            <div class="d-flex files p-3 justify-content-between">
                                <div class="adddocument align-items-center flex-column d-flex"
                                    (click)="selectFile.click()">
                                    <input style="display: none" type="file" (change)="fileupload($event,1)" #selectFile
                                        accept="image/*">
                                    <!-- <img src="assets/images/Group.svg" alt="" width="30px" height="30px"> -->
                                    <img src="assets/images/gallery-1.svg" alt="" width="30px" height="30px">
                                    <span class=" mt-2">
                                        Add image
                                    </span>
                                </div>
                                <div class="adddocument align-items-center flex-column d-flex mx-3"
                                    (click)="selectFile1.click()">
                                    <input style="display: none" type="file" (change)="fileupload($event,2)"
                                        #selectFile1 accept="video/*">
                                    <!-- <img src="assets/images/Group-1.svg" alt="" width="30px" height="30px"> -->
                                    <img src="assets/images/video-playicon.svg" alt="" width="30px" height="30px">
                                    <span class=" mt-2">
                                        Add Video
                                    </span>
                                </div>
                                <div class="adddocument align-items-center flex-column d-flex"
                                    (click)="selectFile2.click()">
                                    <input style="display: none" type="file" (change)="fileupload($event,3)"
                                        #selectFile2 accept="application/pdf">
                                    <!-- <img src="assets/images/docu.svg" alt="" width="30px" height="30px"> -->
                                    <img src="assets/images/documenticon.svg" alt="" width="30px" height="30px">
                                    <span class=" mt-2">
                                        Add Document
                                    </span>
                                </div>
                            </div>
                            <div class="minimumFile mt-2" *ngIf=" submitted && emptyFile">
                                File is required
                            </div>

                            <div class="postdata d-flex justify-content-between align-items-center mt-3">
                                <input style="display: none" type="file" #selectFile3 multiple>
                                <p class="drag" (fileDropped)="onFileDropped($event)" appDragAndDrop>Drag and drop, or
                                    <span (click)="selectFile3.click()">select a file</span>
                                </p>
                            </div>
                            <div class="d-flex align-items-center flex-wrap">
                                <div class="upload-img position-relative d-inline-block mx-2 mb-3"
                                    *ngFor="let image of images; let i = index">
                                    <img [src]="image.url" width="90px" height="90px">
                                    <img src="assets/images/close-circle.png" (click)="deleteImg(i,1)"
                                        class="close position-absolute">
                                </div>
                                <div class="upload-img position-relative d-inline-block mx-2 mb-3"
                                    *ngFor="let video of videos; let i = index">
                                    <video width="90px" height="90px" controls>
                                        <source [src]="video.url" type="video/mp4">
                                        Your browser does not support the video tag.
                                    </video>
                                    <img src="assets/images/close-circle.png" (click)="deleteImg(i,2)"
                                        class="close position-absolute">
                                </div>

                                <div class="upload-img position-relative d-inline-block mx-2 mb-3"
                                    *ngFor="let document of pdf; let i = index">
                                    <a target="_self" [href]="document.url" download="pdf">
                                        <img src="assets/images/pdf 3 (1).svg" width="90px" height="90px">
                                    </a>
                                    <img src="assets/images/close-circle.png" (click)="deleteImg(i,3)"
                                        class="close position-absolute">
                                </div>
                            </div>
                        </div>

                    </div>

                </div>

            </div>

            <div class="adddocumentpage mt-3 mb-4 px-sm-0 px-2">
                <div class="postdata d-flex justify-content-center">
                    <button class="me-2 custom-field" (click)="addfield()">Add Custom Field</button>
                    <button class="ms-2" (click)="onSubmit(addForm.value)">Post</button>
                </div>
            </div>
        </div>
    </form>
</div>
<div class="ps-3">
    <nav class="navbar justify-content-between align-items-center pb-3">
        <nav style="--bs-breadcrumb-divider: url(.assets/images/arrow-right.svg);" aria-label="breadcrumb">
            <ol class="breadcrumb m-0">
                <li class="breadcrumb-item active p-0"> </li>
                <li class="breadcrumb-item active p-0">Customer Purchase Order</li>  
            </ol>
        </nav>
        <div class="btn-group" *ngIf="isVersionDisable">
         
            <mat-form-field appearance="fill" class="dropdown-menu border-0" >
                <mat-select placeholder="Select business activity" 
                    (selectionChange)="selectVersion($event,purchaseOrderDetailForEdit.initial_id)">
                    <mat-option *ngFor="let items of versions"
                        [value]="items">
                       Versions {{items}}
                    </mat-option>
                </mat-select>

            </mat-form-field>
        </div>
    </nav>
        
    <div class="purchase-order-wrapper">
        <div class="purchase-order-main-container pb-5">

            <div class="padding-box">
                <div class="complete-detail-container">
                    <div class="border-bottom">
                        <div class="sub-heading">Client Details</div>
                    </div>
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-6 name-email-details border-right">
                            <div class="d-flex align-items-center">
                                <img src="assets/images/item.png" width="78" height="78" />
                                <div class="ps-4">
                                    <div class="padding-bottom">Name</div>
                                    <div *ngIf="purchaseOrderDetailForEdit?.company_name!=null||purchaseOrderDetailForEdit?.CompanyInfo!=null" class="answers">{{purchaseOrderDetailForEdit?.company_name!=null?purchaseOrderDetailForEdit?.company_name:purchaseOrderDetailForEdit?.CompanyInfo?.company_name}}</div>
                                    <div *ngIf="purchaseOrderDetailForEdit?.company_name==null&&purchaseOrderDetailForEdit?.CompanyInfo==null" class="answers">{{purchaseOrderDetailForEdit?.email}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 name-email-details d-flex flex-column justify-content-center ">
                            <div class="padding-bottom">Email</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.email}}</div>
                        </div>
                    </div>
        
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-6 client-details border-right">
                            <div class="d-flex">
                                <div>
                                    <div class="padding-bottom">Client's Address</div>
                                    <div class="answers">{{purchaseOrderDetailForEdit?.address}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 client-details">
                            <div class="padding-bottom">Client’s Contact Number</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.contact_no}}</div>
                        </div>
                    </div>
        
                    <div class="border-bottom">
                        <div class="sub-heading">Order Details</div>
                    </div>
        
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Business Activity</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.Industry?.industry_name}}</div>
                        </div>
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Industry</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.Category1?.title}}</div>
                        </div>
                        <div class="col-md-4 client-details">
                            <div class="padding-bottom">Product Sub-Category</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.Category2?.title}}</div>
                        </div>
                    </div>
        
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Product type</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.Category3?.title}}</div>
                        </div>
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Product sub type</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.Category4?.title}}</div>
                        </div>
                        <div class="col-md-4 client-details">
                            <div class="padding-bottom">Product brand</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.Brand?.brand_name}}</div>
                        </div>
                    </div>
        
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Product HSN Code</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.hsn_code}}</div>
                        </div>
                        <div class="col-md-4 client-details">
                            <div class="padding-bottom">Product price</div>
                            <div class="answers">₹{{purchaseOrderDetailForEdit?.price}}</div>
                        </div>
                    </div>
        
        
                    <div class="sub-heading">Reference Images</div>
        
        
                    <div class="reference-img-container d-flex">
                        <div  *ngFor="let items of MediaFiles">
                            <img [src]="items?.url" />
                        </div>
                    </div>
        
                    <div class="border-bottom">
                        <div class="sub-heading">Tax Details</div>
                    </div>
        
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Tax Type</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.tax_type}}</div>
                        </div>
                        <div class="col-md-4 client-details">
                            <div class="padding-bottom">Percentage</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.tax_percentage}}</div>
                        </div>
                    </div>
        
                    <div *ngIf="this.type!=7"
                        class="border-bottom d-flex justify-content-between align-items-center product-manufacturing-heading-container">
                        <div class="sub-heading">Products Manufacturing Milestones</div>
                        <div class="d-flex align-items-center cursor" (click)="addManufacturingMilestone()"
                            *ngIf="viewEditRequest || rejectPurchaseOrder||requestEdit">
                            <img src="../../../../../assets/images/add-circle.svg" alt="" width="20" height="20">
                            <div class="ps-1 add-new-text">Add new</div>
                        </div>
                    </div>
                    <div *ngIf="this.type==7"
                        class="border-bottom d-flex justify-content-between align-items-center product-manufacturing-heading-container">
                        <div class="sub-heading">Products Manufacturing Milestones</div>
                        <div class="d-flex align-items-center cursor" (click)="addPurchaseManufacturingMilestone()"
                            *ngIf="viewEditRequest || rejectPurchaseOrder||requestEdit">
                            <img src="../../../../../assets/images/add-circle.svg" alt="" width="20" height="20">
                            <div class="ps-1 add-new-text">Add new</div>
                        </div>
                    </div>
        
                    <div *ngIf="viewEditRequest || rejectPurchaseOrder ||requestEdit">
                        <div class="client-contact-details border-bottom row">
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">1. Milestones name</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductManufacturingMilestones[0]?.manufacturing_milestone_name}}</div>
                            </div>
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">Start date</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductManufacturingMilestones[0]?.manufacturing_start_date|date}}</div>
                            </div>
                            <div class="col-md-4 client-details">
                                <div class="padding-bottom">End Date</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductManufacturingMilestones[0]?.manufacturing_end_date|date}}</div>
                            </div>
                        </div>
        
                        <div class="client-contact-details border-bottom row">
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">No. of units</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductManufacturingMilestones[0]?.manufacturing_number_of_unit}}</div>
                            </div>
                            <div class="col-md-4 client-details">
                                <div class="padding-bottom">Unit type</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductManufacturingMilestones[0]?.manufacturing_unit_type}}</div>
                            </div>
                        </div>
        
                        <div class="client-contact-details border-bottom row">
                            <div
                                class="d-flex justify-content-center align-items-center client-details invoice-challan-container">
                                <div class="d-flex sub-container">
                                    <div class="me-xs-0 me-sm-5 me-md-5"
                                        *ngIf="dispatchedCustomerPurchaseOrder || completedCustomerPurchaseOrder">
                                        <label for="upload-invoice" class="upload-view-text">Upload invoice</label>
                                        <input type="file" name="" id="upload-invoice">
                                    </div>
        
                                    <div for="upload-invoice" class="upload-view-text me-xs-0 me-sm-5 me-md-5"
                                        *ngIf="dispatchedCustomerPurchaseOrder || completedCustomerPurchaseOrder">View delivery
                                        challan</div>
        
                                    <div>
                                        <button class="delivered-btn">Delivered</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div  class="border-bottom d-flex justify-content-between align-items-center product-manufacturing-heading-container">
                        <div class="sub-heading">Products Delivery Milestones</div>
                        <div class="d-flex align-items-center cursor" (click)="addDeliveryMilestone()" *ngIf="requestEdit==false">
                            <img src="../../../../../assets/images/add-circle.svg" alt="" width="20" height="20">
                            <div class="ps-1 add-new-text">Add new</div>
                        </div>
                    </div>
        
                    <div>
                        <div class="client-contact-details border-bottom row">
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">1. Milestones name</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductDeliveryMilestones[0]?.milestone_name}}</div>
                            </div>
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">Start date</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductDeliveryMilestones[0]?.product_delivery_start_date|date}}</div>
                            </div>
                            <div class="col-md-4 client-details">
                                <div class="padding-bottom">End Date</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductDeliveryMilestones[0]?.product_delivery_end_date|date}}</div>
                            </div>
                        </div>
                        <div class="client-contact-details border-bottom row">
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">No. of units</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductDeliveryMilestones[0]?.number_of_unit}}</div>
                            </div>
                            <div class="col-md-4 client-details border-right">
                                <div class="padding-bottom">Unit type</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductDeliveryMilestones[0]?.unit_type}}</div>
                            </div>
                            <div class="col-md-4 client-details">
                                <div class="padding-bottom">Payment Recieved Date</div>
                                <div class="answers">{{purchaseOrderDetailForEdit?.ProductDeliveryMilestones[0]?.payment_recieved_date|date}}</div>
                            </div>
                        </div>
                        <div class="client-contact-details border-bottom row">
                            <div
                                class="d-flex justify-content-center align-items-center client-details invoice-challan-container">
                                <div class="d-flex sub-container">
                                    <div class="me-xs-0 me-sm-5 me-md-5"
                                        *ngIf="dispatchedCustomerPurchaseOrder || completedCustomerPurchaseOrder">
                                        <label for="upload-invoice" class="upload-view-text">Upload invoice</label>
                                        <input type="file" name="" id="upload-invoice">
                                    </div>
        
                                    <div for="upload-invoice" class="upload-view-text me-xs-0 me-sm-5 me-md-5"
                                        *ngIf="dispatchedCustomerPurchaseOrder || completedCustomerPurchaseOrder">View delivery
                                        challan</div>
        
                                    <div>
                                        <button class="delivered-btn">Delivered</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="border-bottom">
                        <div class="sub-heading">Other Details</div>
                    </div>
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Total number of units delivered</div>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="answers">{{purchaseOrderDetailForEdit?.no_of_unit_ordered}} Units Delivered</div>
                                <div class="amount-per-unit-text">₹25,000/Unit</div>
                            </div>
                        </div>
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Discount</div>
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="answers">New User Discount</div>
                                <div class="discount-text">{{purchaseOrderDetailForEdit?.discount_percentage}}% Discount</div>
                            </div>
                        </div>
                        <div class="col-md-4 client-details">
                            <div class="padding-bottom">Discount</div>
                            <div class="answers">₹{{purchaseOrderDetailForEdit?.discount_percentage}}</div>
                        </div>
                    </div>
                    <div class="client-contact-details border-bottom row">
                        <div class="col-md-4 client-details border-right">
                            <div class="padding-bottom">Total amount recieved</div>
                            <div class="answers">₹{{purchaseOrderDetailForEdit?.amount_recieved}}</div>
                        </div>
                        <div class="col-md-8 client-details">
                            <div class="padding-bottom">No. of days for final payment after product delivery</div>
                            <div class="answers">{{purchaseOrderDetailForEdit?.final_payment_date}} days</div>
                        </div>
                    </div>
                    <div class="sub-heading">Documents</div>
                    <div class="document-pics-container d-flex">
                        <div  *ngFor="let items of MediaFiles">
                            <img [src]="items?.url" />
                        </div>
                    </div>
                    <div class="client-details">
                        <label class="container">Allow Notification
                            <input type="checkbox">
                            <span class="checkmark"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <div class="row py-5 d-flex justify-content-center align-items-center border-1 border-default" *ngIf="editDelete">
            <button type="button" class="btn btn-danger  bg-white border border-secondary  d-inline-block w-auto  rounded-pill" (click)="deleteModal()">Delete</button>
            <button type="button" class="btn btn-danger d-inline-block w-auto rounded-pill  text-white ms-3 ">Edit</button>
        </div>
        <div class="row py-5 d-flex justify-content-center align-items-center border-1 border-default" *ngIf="readyToDispatch">
            <button type="button" class="btn btn-danger  bg-white border border-secondary  d-inline-block w-auto  rounded-pill" (click)="delayModal()">Delay</button>
            <button type="button" class="btn btn-danger d-inline-block w-auto rounded-pill  text-white ms-3" (click)="readyDispatch()" >Ready to dispatch</button>
        </div>
        <div class="row py-5 d-flex justify-content-center align-items-center border-1 border-default" *ngIf="rejectPurchaseOrder">
            <button type="button" class="btn btn-danger  bg-white border border-secondary  d-inline-block w-auto  rounded-pill" (click)="rejectPopup(purchaseOrderDetailForEdit?.id)">Reject</button>
            <button type="button" class="btn btn-danger d-inline-block w-auto rounded-pill  text-white ms-3" (click)="acceptOrder(purchaseOrderDetailForEdit?.id)" >Accept</button>
        </div>
        <!-- <div class="row py-5 d-flex justify-content-center align-items-center border-1 border-default" *ngIf="viewEditRequest">
            <button type="button" class="btn btn-danger  bg-white border border-secondary  d-inline-block w-auto  rounded-pill" (click)="rejectPopup()">Reject</button>
            <button type="button" class="btn btn-danger d-inline-block w-auto rounded-pill  text-white ms-3" (click)="readyDispatch()" >Approve request</button>
        </div> -->

        <div class="row py-5 d-flex justify-content-center align-items-center border-1 border-default" *ngIf="requestEdit&&viewOrder==false">
            <button type="button" class="btn btn-danger d-inline-block w-auto rounded-pill  text-white ms-3" (click)="RequestToedit(purchaseOrderDetailForEdit?.id)" [disabled]="IsButtonDisable">Request edit</button>
        </div>
    </div>
</div>
